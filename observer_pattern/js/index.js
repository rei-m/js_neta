"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();$(function(){$("input").each(function(){new AppView(this)})});var AppModel=function(){function e(t){_classCallCheck(this,e),this.val="",this.attrs=t,void 0===t&&(this.attrs={required:"",maxlength:8,minlength:4}),this.listeners={valid:[],invalid:[]}}return _createClass(e,[{key:"on",value:function(e,t){this.listeners[e].push(t)}},{key:"trigger",value:function(e){this.listeners[e].map(function(e){e()})}},{key:"set",value:function(e){this.val!==e&&(this.val=e,this.validate())}},{key:"validate",value:function(){var e=void 0;this.errors=[];for(var t in this.attrs)e=this.attrs[t],this[t](e)||this.errors.push(t);this.trigger(this.errors.length?"invalid":"valid")}},{key:"required",value:function(){return""!==this.val}},{key:"maxlength",value:function(e){return this.val.length<=e}},{key:"minlength",value:function(e){return e<=this.val.length}}]),e}(),AppView=function(){function e(t){_classCallCheck(this,e),this.$el=$(t),this.$list=this.$el.next().children();var i=this.$el.data();this.$el.prop("required")&&(i.required=""),this.model=new AppModel(i),this.handleEvents()}return _createClass(e,[{key:"handleEvents",value:function(){var e=this;this.$el.on("keyup",function(t){e.onKeyUp(t)}),this.model.on("valid",function(){e.onValid()}),this.model.on("invalid",function(){e.onInValid()})}},{key:"onKeyUp",value:function(e){var t=$(e.currentTarget);this.model.set(t.val())}},{key:"onValid",value:function(){this.$el.removeClass("error"),this.$list.hide()}},{key:"onInValid",value:function(){var e=this;this.$el.addClass("error"),this.$list.hide(),this.model.errors.map(function(t){e.$list.filter('[data-error="'+t+'"]').show()})}}]),e}();